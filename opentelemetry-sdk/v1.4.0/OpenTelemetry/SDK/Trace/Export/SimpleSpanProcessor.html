<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor
  
    &mdash; OpenTelemetry
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../OpenTelemetry.html" title="OpenTelemetry (module)">OpenTelemetry</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../SDK.html" title="OpenTelemetry::SDK (module)">SDK</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Trace.html" title="OpenTelemetry::SDK::Trace (module)">Trace</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Export.html" title="OpenTelemetry::SDK::Trace::Export (module)">Export</a></span></span>
     &raquo; 
    <span class="title">SimpleSpanProcessor</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/opentelemetry/sdk/trace/export/simple_span_processor.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>An implementation of the duck type SpanProcessor that converts the <span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> to ioio.opentelemetryio.opentelemetry.protoio.opentelemetry.proto.traceio.opentelemetry.proto.trace.v1io.opentelemetry.proto.trace.v1.Span and passes it to the configured exporter.</p>

<p>Typically, the SimpleSpanProcessor will be most suitable for use in testing; it should be used with caution in production. It may be appropriate for production use in scenarios where creating multiple threads is not desirable as well as scenarios where different custom attributes should be added to individual spans based on code scopes.</p>

<p>Only spans that are recorded are converted, Trace::Span#is_recording? must return true.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#force_flush-instance_method" title="#force_flush (instance method)">#<strong>force_flush</strong>(timeout: nil)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Export all ended spans to the configured <code>Exporter</code> that have not yet been exported, then call Exporter#force_flush.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(span_exporter)  &#x21d2; SimpleSpanProcessor </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a new <span class='object_link'><a href="" title="OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor (class)">SimpleSpanProcessor</a></span> that converts spans to proto and forwards them to the given span_exporter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_finish-instance_method" title="#on_finish (instance method)">#<strong>on_finish</strong>(span)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Called when a <span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is ended, if the <span class='object_link'><a href="../Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_start-instance_method" title="#on_start (instance method)">#<strong>on_start</strong>(span, parent_context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Called when a <span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is started, if the <span class='object_link'><a href="../Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown-instance_method" title="#shutdown (instance method)">#<strong>shutdown</strong>(timeout: nil)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Called when <span class='object_link'><a href="../TracerProvider.html#shutdown-instance_method" title="OpenTelemetry::SDK::Trace::TracerProvider#shutdown (method)">TracerProvider#shutdown</a></span> is called.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(span_exporter)  &#x21d2; <tt><span class='object_link'><a href="" title="OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor (class)">SimpleSpanProcessor</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new <span class='object_link'><a href="" title="OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor (class)">OpenTelemetry::SDK::Trace::Export::SimpleSpanProcessor</a></span> that converts spans to proto and forwards them to the given span_exporter.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>span_exporter</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the (duck type) SpanExporter to where the recorded Spans are pushed.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>ArgumentError if the span_exporter is nil.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/export/simple_span_processor.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_span_exporter'>span_exporter</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exporter </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_span_exporter'>span_exporter</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not appear to be a valid exporter</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='const'>Common</span><span class='op'>::</span><span class='const'>Utilities</span><span class='period'>.</span><span class='id identifier rubyid_valid_exporter?'>valid_exporter?</span><span class='lparen'>(</span><span class='id identifier rubyid_span_exporter'>span_exporter</span><span class='rparen'>)</span>

  <span class='ivar'>@span_exporter</span> <span class='op'>=</span> <span class='id identifier rubyid_span_exporter'>span_exporter</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="force_flush-instance_method">
  
    #<strong>force_flush</strong>(timeout: nil)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Export all ended spans to the configured <code>Exporter</code> that have not yet been exported, then call Exporter#force_flush.</p>

<p>This method should only be called in cases where it is absolutely necessary, such as when using some FaaS providers that may suspend the process after an invocation, but before the <code>Processor</code> exports the completed spans.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>optional Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An optional timeout in seconds.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>SUCCESS if no error occurred, FAILURE if a non-specific failure occurred, TIMEOUT if a timeout occurred.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/export/simple_span_processor.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_force_flush'>force_flush</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@span_exporter</span><span class='op'>&amp;.</span><span class='id identifier rubyid_force_flush'>force_flush</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="../Export.html#SUCCESS-constant" title="OpenTelemetry::SDK::Trace::Export::SUCCESS (constant)">SUCCESS</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_finish-instance_method">
  
    #<strong>on_finish</strong>(span)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Called when a <span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is ended, if the <span class='object_link'><a href="../Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>

<p>This method is called synchronously on the execution thread, should not throw or block the execution thread.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>span</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the <span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> that just ended.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/export/simple_span_processor.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_finish'>on_finish</span><span class='lparen'>(</span><span class='id identifier rubyid_span'>span</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_span'>span</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_trace_flags'>trace_flags</span><span class='period'>.</span><span class='id identifier rubyid_sampled?'>sampled?</span>

  <span class='ivar'>@span_exporter</span><span class='op'>&amp;.</span><span class='id identifier rubyid_export'>export</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_span'>span</span><span class='period'>.</span><span class='id identifier rubyid_to_span_data'>to_span_data</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span> <span class='comment'># rubocop:disable Style/RescueStandardError
</span>  <span class='const'><span class='object_link'><a href="../../../../OpenTelemetry.html" title="OpenTelemetry (module)">OpenTelemetry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_handle_error'>handle_error</span><span class='lparen'>(</span><span class='label'>exception:</span> <span class='id identifier rubyid_e'>e</span><span class='comma'>,</span> <span class='label'>message:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unexpected error in span.on_finish</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_start-instance_method">
  
    #<strong>on_start</strong>(span, parent_context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Called when a <span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is started, if the <span class='object_link'><a href="../Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>

<p>This method is called synchronously on the execution thread, should not throw or block the execution thread.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>span</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the <span class='object_link'><a href="../Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> that just started.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>parent_context</span>
      
      
        <span class='type'>(<tt>Context</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the parent Context of the newly started span.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/export/simple_span_processor.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_start'>on_start</span><span class='lparen'>(</span><span class='id identifier rubyid_span'>span</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_context'>parent_context</span><span class='rparen'>)</span>
  <span class='comment'># Do nothing.
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shutdown-instance_method">
  
    #<strong>shutdown</strong>(timeout: nil)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Called when <span class='object_link'><a href="../TracerProvider.html#shutdown-instance_method" title="OpenTelemetry::SDK::Trace::TracerProvider#shutdown (method)">TracerProvider#shutdown</a></span> is called.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>optional Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An optional timeout in seconds.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>SUCCESS if no error occurred, FAILURE if a non-specific failure occurred, TIMEOUT if a timeout occurred.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/export/simple_span_processor.rb', line 85</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shutdown'>shutdown</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@span_exporter</span><span class='op'>&amp;.</span><span class='id identifier rubyid_shutdown'>shutdown</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="../Export.html#SUCCESS-constant" title="OpenTelemetry::SDK::Trace::Export::SUCCESS (constant)">SUCCESS</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Jan 25 18:22:14 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.0.6).
</div>

    </div>
  </body>
</html>